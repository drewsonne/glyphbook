<!doctype html>
<html lang="en">
<head>
    <title>Glyphbook</title>
    <meta name="viewport"
          content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <script src="js/jquery-3.4.1.min.js" type="text/javascript"></script>
    <link href="css/app.css" rel="stylesheet">
    <script src="js/paper-core.js" type="text/javascript"></script>
    <script src="js/paper-full.js" type="text/javascript"></script>
    <script src="js/app.js" type="text/javascript"></script>
    <script type="text/javascript">
      paper.install(window)
      let grid
      let artifact

      window.onload = function () {

        function render () {
          grid.draw(view)
          artifact.draw(view)
          artifact.fitToView(view)
        }

        paper.setup('notebook')

        grid = new GBGrid()
        artifact = new GBArtifact()

        let resizeTimer
        view.onResize = function (event) {
          clearTimeout(resizeTimer)
          resizeTimer = setInterval(function () {
            render()
            clearTimeout(resizeTimer)
          }, 10)
        }

        $.ajax(
          '/glyphbook/api/v1/artifact/6716.json',
          {
            success: function (data, status) {
              artifact.set_href(
                data.media[0].href,
                view,
              )
              render()
            },
          },
        ).done(function () {

        })
      }

    </script>

</head>
<body>
<div class="wrapper">
    <div class="title">
        <h1>Glyphbook</h1>
    </div>
    <div class="workspace">
        <canvas id="notebook" resize></canvas>
    </div>
    <div class="toolbar">Toolbar</div>
</div>

</body>
